# Четвертая лекция, часть 2

## Матрица Слуцкого

Чтобы лучше почувствовать разницу между Маршалианским и Хиксианским спросами, сфокусируемся на связывающем их уравнении:

$$ \vec h(\vec p,  V(\vec p, I)) = \vec m (\vec p, I).$$

:::{dropdown} Помните ли вы условия для Дуальности?

Строго выпуклая задача + локальная ненасыщаемость.

:::

Вас, скорее всего, не учили матричному дифференциированию, но в данном случае оно работает примерно также как и обычное:

$$ \nabla \vec m(\vec p,  I) = \nabla \vec h(\vec p,  \bar U) + \frac{\partial m}{\partial I} \cdot \nabla E(\vec p, \bar U) = \nabla \vec h(\vec p,  \bar U) + \frac{\partial m}{\partial I} \cdot \vec h $$

Проблема в том, что и $\frac{\partial m}{\partial I}$ и $\vec h$ это вектора длины $n$, и, поэтому, мы должны подумать, в каком порядке мы их хотим перемножить. Есть два варианта: либо мы умножаем строку $\frac{\partial m}{\partial I}$ на столбец $\vec h$, либо мы умножаем столбец $\frac{\partial m}{\partial I}$ на строку $\vec h$. Один из этих вариантов даст число, а другой матрицу. Тот вариант, который сохранит размерность объекта и будет правильным матричным дифференциированием. 

Должно получиться примерно следующее:

$$ 
(\nabla m_x, \nabla m_y) = (\nabla h_x, \nabla h_y) + (h_x, h_y)^T \cdot (\frac{\partial}{\partial I} m_x, \frac{\partial}{\partial I} m_y)
$$

Чтобы не запутаться, достаточно запомнить что координаты спросов идут по горизонтали, градиент по вертикали, а вектор $h$ в правой части это, на самом деле, тоже градиент.
